<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Ultimate Nobel Explorer by Taezeem | Physics, Chemistry, Medicine, Literature, Peace, Economics | 1901-2024">
<title>Ultimate Nobel Explorer ‚Ä¢ Taezeem</title>
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --physics:#00acc1; --chemistry:#7b1fa2; --medicine:#c2185b;
  --literature:#f57c00; --peace:#388e3c; --economics:#455a64;
  --bg:#f4f7f6; --card:#fff; --text:#333;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Raleway',sans-serif;background:var(--bg);color:var(--text);}
header,footer{background:#006064;color:#fff;text-align:center;padding:1.5rem;}
header h1{font-size:2rem;} header p{margin-top:0.3rem;color:#b2ebf2;}
nav{background:#006064;display:flex;justify-content:space-between;align-items:center;padding:0.8rem 1rem;position:sticky;top:0;z-index:100;}
nav h1{font-size:1.5rem;} nav input{padding:0.5rem 0.8rem;border-radius:8px;border:none;font-size:1rem;outline:none;}
nav input:focus{box-shadow:0 0 8px rgba(0,172,193,0.4);}
.container{display:flex;flex-wrap:wrap;justify-content:center;gap:1.5rem;padding:2rem 1rem;max-width:1400px;margin:auto;}
section{flex:1 1 300px;max-width:300px;background:var(--card);border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,0.08);padding:1.5rem;transition:0.3s;display:flex;flex-direction:column;gap:1rem;}
section:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,0.12);}
section h2{text-align:center;margin-bottom:0.5rem;}
.badge{padding:0.3rem 0.7rem;border-radius:6px;color:#fff;font-size:0.8rem;display:inline-block;margin-bottom:0.5rem;text-align:center;}
select{width:100%;padding:0.7rem;border-radius:8px;border:1.5px solid #00acc1;font-size:1rem;margin-bottom:1rem;cursor:pointer;transition:0.3s;}
select:focus{border-color:#007c91;box-shadow:0 0 8px rgba(0,172,193,0.3);outline:none;}
ul{list-style:none;max-height:200px;overflow-y:auto;padding:0;margin:0;}
li{padding:0.6rem 0.8rem;border-bottom:1px solid #eee;border-radius:6px;cursor:pointer;transition:0.3s;font-weight:500;display:flex;justify-content:space-between;align-items:center;}
li:hover{background:#e0f7fa;}
form{display:flex;flex-direction:column;gap:0.5rem;}
form textarea{padding:0.7rem;border-radius:8px;border:1.5px solid #00acc1;resize:vertical;min-height:70px;transition:0.3s;}
form textarea:focus{border-color:#007c91;box-shadow:0 0 6px rgba(0,172,193,0.3);outline:none;}
form button{background:#00acc1;color:#fff;border:none;padding:0.6rem 1rem;border-radius:8px;cursor:pointer;transition:0.2s;}
form button:hover{background:#007c91;transform:scale(1.05);}
.overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.6);z-index:100;}
.popup{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:2rem;border-radius:12px;max-width:450px;width:90%;z-index:101;box-shadow:0 8px 20px rgba(0,0,0,0.2);text-align:center;animation:popIn 0.3s ease forwards;}
.popup h3{margin-bottom:0.5rem;font-size:1.4rem;}
.popup p{margin:0.4rem 0;}
@keyframes popIn{from{opacity:0;transform:translate(-50%,-60%) scale(0.95);}to{opacity:1;transform:translate(-50%,-50%) scale(1);}}
footer{font-size:0.85rem;}
#charts{width:100%;max-width:1200px;margin:20px auto;text-align:center;}
canvas{background:#fff;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,0.1);}
.favorites{margin-left:10px;color:#007c91;cursor:pointer;}
</style>
</head>
<body>

<nav>
<h1>Ultimate Nobel Explorer</h1>
<input type="text" id="globalSearch" placeholder="Search by name, year, category..." oninput="searchGlobal(this.value)">
</nav>

<header>
<h1>Ultimate Nobel Explorer</h1>
<p>Physics | Chemistry | Medicine | Literature | Peace | Economics | 1901 - 2024</p>
</header>

<div class="container" id="categoriesContainer"></div>

<h2 style="text-align:center;">Favorites ‚≠ê</h2>
<ul id="favoritesList" style="max-width:600px;margin:0 auto;"></ul>
<button style="display:block;margin:10px auto;" onclick="exportFavorites()">Download Favorites CSV</button>

<div id="charts">
<h2>Category Trends üìä</h2>
<canvas id="trendChart" width="1000" height="400"></canvas>
</div>

<footer>&copy; 2026 Ultimate Nobel Explorer | Taezeem Class 8th Rose</footer>

<div class="overlay"></div>
<div class="popup">
<h3 id="popupName"></h3>
<p><strong>Year:</strong> <span id="popupYear"></span></p>
<p><strong>Category:</strong> <span id="popupCategory"></span></p>
<p><strong>Work:</strong> <span id="popupWork"></span></p>
<button onclick="speakMotivation()">üîä Listen</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const categories=['physics','chemistry','medicine','literature','peace','economics'];
const data={physics:{},chemistry:{},medicine:{},literature:{},peace:{},economics:{}};
let favorites=JSON.parse(localStorage.getItem('nobelFavorites'))||[];

// Fetch Data
async function fetchNobelData(){
  const res=await fetch("https://api.nobelprize.org/2.1/nobelPrizes?limit=1000");
  const json=await res.json();
  json.nobelPrizes.forEach(p=>{
    let cat=p.category.en.toLowerCase();
    if(cat==='economic sciences') cat='economics';
    if(cat==='physiology or medicine') cat='medicine';
    if(!data[cat]) return;
    const year=p.awardYear;
    if(!data[cat][year]) data[cat][year]=[];
    p.laureates?.forEach(l=>{
      data[cat][year].push({
        name:l.knownName?.en||l.fullName?.en||`${l.firstName?.en||''} ${l.surname?.en||''}`.trim(),
        work:l.motivation?.en||"No description",
        year, category:cat
      });
    });
  });
  buildSections();
  populateFavorites();
  buildChart();
}

// Build Sections
function buildSections(){
  const container=document.getElementById('categoriesContainer');
  container.innerHTML='';
  categories.forEach(cat=>{
    const sec=document.createElement('section');
    sec.innerHTML=`<h2 style="color: var(--${cat})">${cat.charAt(0).toUpperCase()+cat.slice(1)}</h2>
      <span class="badge" style="background: var(--${cat})">${cat.charAt(0).toUpperCase()+cat.slice(1)}</span>
      <select onchange="showList(this.value,'${cat}')"><option value="">Select year</option></select>
      <ul id="${cat}List"></ul>
      <form action="https://formspree.io/f/xrbzezdd" method="POST">
        <input type="hidden" name="container" value="${cat}">
        <textarea name="comment" placeholder="Add your point..." required></textarea>
        <button type="submit">Submit</button>
      </form>`;
    container.appendChild(sec);
    const select=sec.querySelector('select');
    Object.keys(data[cat]).sort((a,b)=>b-a).forEach(y=>{
      const opt=document.createElement('option'); opt.value=y; opt.textContent=y; select.appendChild(opt);
    });
  });
}

// Show List
function showList(year,cat){
  const list=document.getElementById(cat+'List');
  list.innerHTML='';
  if(!data[cat][year]) return;
  data[cat][year].forEach(item=>{
    const li=document.createElement('li');
    li.innerHTML=`<span>${item.name}</span><span class="favorites" onclick="addFavorite(event,'${item.name}','${item.year}','${item.category}','${item.work}')">‚≠ê</span>`;
    li.onclick=()=>showPopup(item);
    list.appendChild(li);
  });
}

// Popup
const overlay=document.querySelector('.overlay');
const popup=document.querySelector('.popup');
function showPopup(item){
  document.getElementById('popupName').textContent=item.name;
  document.getElementById('popupYear').textContent=item.year;
  document.getElementById('popupCategory').textContent=item.category;
  document.getElementById('popupWork').textContent=item.work;
  overlay.style.display='block'; popup.style.display='block';
}
overlay.onclick=()=>{overlay.style.display='none';popup.style.display='none';}

// Favorites
function addFavorite(e,name,year,category,work){
  e.stopPropagation();
  if(!favorites.find(f=>f.name===name&&f.year===year)){
    favorites.push({name,year,category,work});
    localStorage.setItem('nobelFavorites',JSON.stringify(favorites));
    populateFavorites();
  }
}
function populateFavorites(){
  const list=document.getElementById('favoritesList');
  list.innerHTML='';
  favorites.forEach(f=>{
    const li=document.createElement('li');
    li.textContent=`${f.name} (${f.year}, ${f.category})`;
    li.onclick=()=>showPopup(f);
    list.appendChild(li);
  });
}
function exportFavorites(){
  if(!favorites.length) return alert("No favorites saved!");
  let csv='Name,Year,Category,Work\n';
  favorites.forEach(f=>{csv+=`"${f.name}","${f.year}","${f.category}","${f.work.replace(/"/g,'""')}"\n`;});
  const blob=new Blob([csv],{type:'text/csv'}); const url=URL.createObjectURL(blob);
  const a=document.createElement('a'); a.href=url; a.download='nobel_favorites.csv'; a.click();
  URL.revokeObjectURL(url);
}

// Search
function searchGlobal(query){
  query=query.toLowerCase();
  categories.forEach(cat=>{
    const list=document.getElementById(cat+'List'); list.innerHTML='';
    Object.values(data[cat]).flat().filter(item=>
      item.name.toLowerCase().includes(query)||
      item.year.includes(query)||
      item.category.toLowerCase().includes(query)
    ).forEach(item=>{
      const li=document.createElement('li');
      li.innerHTML=`<span>${item.name} (${item.year})</span><span class="favorites" onclick="addFavorite(event,'${item.name}','${item.year}','${item.category}','${item.work}')">‚≠ê</span>`;
      li.onclick=()=>showPopup(item);
      list.appendChild(li);
    });
  });
}

// Voice
function speakMotivation(){
  const text=document.getElementById('popupWork').textContent;
  speechSynthesis.speak(new SpeechSynthesisUtterance(text));
}

// Chart
function buildChart(){
  const ctx=document.getElementById('trendChart').getContext('2d');
  const years=[...new Set(Object.values(data).flatMap(cat=>Object.keys(cat)))].sort();
  const datasets=categories.map(cat=>({
    label:cat.charAt(0).toUpperCase()+cat.slice(1),
    data:years.map(y=>data[cat][y]?data[cat][y].length:0),
    borderWidth:2, fill:false, borderColor:`var(--${cat})`
  }));
  if(window.trendChart) window.trendChart.destroy();
  window.trendChart=new Chart(ctx,{type:'line',data:{labels:years,datasets:datasets},options:{responsive:true,plugins:{legend:{position:'top'}}}});
}

fetchNobelData();
</script>

</body>
</html>
